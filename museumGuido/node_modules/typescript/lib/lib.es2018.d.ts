var spawn = require('child_process').spawn;
var test = require('tap').test;

test('dotSlashEmpty', testCmd('./bin.js', []));

test('dotSlashArgs', testCmd('./bin.js', [ 'a', 'b', 'c' ]));

test('nodeEmpty', testCmd('node bin.js', []));

test('nodeArgs', testCmd('node bin.js', [ 'x', 'y', 'z' ]));

test('whichNodeEmpty', function (t) {
    var which = spawn('which', ['node']);
    
    which.stdout.on('data', function (buf) {
        t.test(
            testCmd(buf.toString().trim() + ' bin.js', [])
        );
        t.end();
    });
    
    which.stderr.on('data', function (err) {
        assert.error(err);
        t.end();
    });
});

test('whichNodeArgs', function (t) {
    var which = spawn('which', ['node']);

    which.stdout.on('data', function (buf) {
        t.test(
            testCmd(buf.toString().trim() + ' bin.js', [ 'q', 'r' ])
        );
        t.end();
    });
    
    w